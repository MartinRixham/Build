#! /bin/bash

map()
{
	for line in $(cat); do
		$1 $line
	done
}

is_installed()
{
	brew ls --versions $1 > /dev/null
}

install()
{
	if ! is_installed $1; then
		brew install $1
	fi
}

install_dependencies()
{
	$JQ -r .[] | map install
}

install_jq()
{
	install jq
	JQ=$(brew --prefix jq)/bin/jq
}

build()
{
	$JQ .dependencies | install_dependencies 
}

make_recipe()
{
	install_jq
	cat $1 | build
}

make_recipe recipe.json
