#! /bin/bash

is_installed()
{
	brew ls --versions $1 > /dev/null
}

install()
{
	if ! is_installed $1; then
		brew install $1
	fi
}

install_dependencies()
{
	for dependency in $(echo $1 | $JQ -r .[]); do
		install $dependency
	done
}

build()
{
	install_dependencies $(echo $1 | $JQ -c .dependencies)
}

make_recipe()
{
	install jq
	JQ=$(brew --prefix jq)/bin/jq
	build $(cat $1 | $JQ -c)
}

make_recipe recipe.json
